#! /usr/bin/env ruby

require 'FileUtils'
require 'tilt'
#deletes all existing files in the public directory
FileUtils.rm_rf Dir.glob('public/*')

#Copy the style.css directory into the public directory
FileUtils.cp 'style.css', 'public/style.css'

#Copy the img directory into the public directory
FileUtils.cp_r 'img', 'public' 




Dir['content/*'].each do |path|
  basename = File.basename(path) 
  article_filename = 'content/' + basename
  generated_filename = 'public/' + basename

  
  article_content = File.read(article_filename)
  template = Tilt.new('views/layout.erb')
  generate_content = template.render { article_content }
  
	
  File.open("#{generated_filename}", 'w') {|f| f.write(generate_content) }

end

