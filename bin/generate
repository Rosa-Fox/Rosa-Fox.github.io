#! /usr/bin/env ruby

require 'FileUtils'
#deletes all existing files in the public directory
FileUtils.rm_rf Dir.glob('public/*')

#Copy the style.css directory into the public directory
FileUtils.cp 'style.css', 'public/style.css'

#Copy the img directory into the public directory
FileUtils.cp_r 'img', 'public' 

header = File.read('partials/header.html')
#This content variable needs to store information relevant to files as the loop iterates... not sure how to do this
#content = File.read('content/index.html')
footer = File.read('partials/footer.html')



Dir['content/*'].each do |path|
  basename = File.basename(path) 
  article_filename = 'content/' + basename
  generated_filename = 'public/' + basename

  whole_content = File.read(article_filename)
  whole_page = header + whole_content + footer
	
File.open("#{generated_filename}", 'w') {|f| f.write(whole_page) }

end

